{% extends "kouteikanri/base.html" %}
{% load mathfilters %}
{% load utils %}

{% block title %}全ライン工程一覧{% endblock title %}

{% block content %}

<br>
<h2 align="center">全ライン工程一覧</h2>
<table style="width: 95%;">
    <tr>
        <td>
            <a href="{% url 'kouteikanri:top' %}"
               class="btn-sm btn-info" id="btn_bak" role="button">ライン選択へ</a>
        </td>
        <td><h5 align="right">製造日: {{ date }}</h5></td>
    </tr>
</table>
<br>
<form action="" method="post">
    {% csrf_token %}
    <table class="table table-striped table-bordered" style="width: 95%">
        <thead class="table-sm" align="center">
            <tr>
                <th><label for="line">ライン名</label></th>
                <th><label for="period">時間帯</label></th>
                <th><label for="val_sum">終了数<br>総数</label></th>
                <th><label for="left_val">残り</label></th>
                <!-- <th><label for="left_time">残り<br>時間</label></th> -->
                <th><label for="endy_max">終了<br>予定</label></th>
                <th><label for="comp_time">実際<br>終了</label></th>
                <th><label for="progress">進捗</label></th>
            </tr>
        </thead>
        <tbody style="width: 100%;">
            {% for data in emp_list %}
            <tr>
                <td>
                    <div id="line">
                        <a href="{% url 'kouteikanri:list' data.line date data.period %}">{{ data.line }}</a>
                    </div>
                </td>
                <td><div id="period">{{ data.period }}</div></td>
                <td><div id="val_sum" align="right">{{ data.val_end_sum }}<br>{{ data.val_sum }}</div></td>
                <td><div id="left_val" align="right">{{ data.left_cnt }}品<br>{{ data.left_val }}</div></td>
                <!-- <td><div id="left_time" align="right">{{ data.left_time }}分</div></td> -->
                <td><div id="endy_max" align="right">{{ data.endy_max|date:"G:i" }}</div></td>
                <td><div id="comp_time" align="right">{{ data.endj_max|comp_time:data.left_time|date:"G:i" }}</div></td>
                <td style="width: 15%;">
                    <div id="progress" class="progress">
                        <div class="progress-bar {% if data.progress == 100 %}bg-success{%else%}progress-bar-striped progress-bar-animated{% endif %}"
                             role="progressbar"
                             style="width: {{data.progress}}%;"
                             aria-valuenow="{{data.progress}}"
                             aria-valuemin="0"
                             aria-valuemax="100">
                            {{ data.progress }}%
                        </div>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</form>

{% endblock content %}